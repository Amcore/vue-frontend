!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define("little",["vue"],t):"object"==typeof exports?exports.little=t(require("vue")):e.little=t(e.vue)}(window,function(e){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){var a=n(3);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(6).default)("6fed9784",a,!1,{})},function(t,n){t.exports=e},function(e,t,n){"use strict";var a=n(0);n.n(a).a},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".x-proxy-panel__icon {\n  position: fixed;\n  width: 40px;\n  bottom: 10px;\n  left: 10px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 13px;\n  background: #38f;\n  text-align: center;\n  border-radius: 50%;\n  color: white;\n  box-shadow: 2px 3px 5px #999;\n  cursor: pointer;\n}\n.x-proxy-panel__dialog .el-form-item {\n  display: flex;\n}\n.x-proxy-panel__dialog .el-form-item__expand {\n  border-top: 1px solid lightgray;\n}\n.x-proxy-panel__dialog .el-form-item__expand .env-name {\n  color: #909399;\n  font-weight: 400;\n}\n.x-proxy-panel__dialog .el-form-item .el-form-item__label {\n  width: 75px;\n}\n.x-proxy-panel__dialog .el-form-item .mock {\n  display: inline-flex;\n  align-items: center;\n}\n.x-proxy-panel__dialog .el-form-item .mock .el-icon-question {\n  color: #5E7BE4;\n  margin-left: 8px;\n}\n.x-proxy-panel__dialog .el-form-item.action {\n  justify-content: center;\n}\n.x-proxy-panel__dialog .el-form-item .el-input {\n  width: 230px;\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var r=(o=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),i=a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"});return[n].concat(i).concat([r]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(a[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];null!=o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"x-proxy-panel"},[n("div",{staticClass:"x-proxy-panel__icon",on:{click:function(t){return e.toggleDialog(!0)}}},[e._v("api")]),e._v(" "),e.panelMounted?n("el-dialog",{attrs:{visible:e.show,title:"切换请求环境",width:"450px","custom-class":"x-proxy-panel__dialog"},on:{close:function(t){return e.toggleDialog(!1)}}},[n("el-form",{attrs:{model:e.$data}},[n("el-form-item",{attrs:{label:"环境"}},[n("el-radio",{attrs:{label:"test"},model:{value:e.targetType,callback:function(t){e.targetType=t},expression:"targetType"}},[e._v("标准环境")]),e._v(" "),n("el-radio",{attrs:{label:"custom"},model:{value:e.targetType,callback:function(t){e.targetType=t},expression:"targetType"}},[e._v("自定义")])],1),e._v(" "),"test"===e.targetType?n("el-form-item",{attrs:{label:"标准环境",prop:"apiTarget"}},[n("el-select",{attrs:{placeholder:"请选择测试环境",size:"small"},model:{value:e.apiTarget,callback:function(t){e.apiTarget=t},expression:"apiTarget"}},e._l(e.targets,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1):e._e(),e._v(" "),"custom"===e.targetType?n("el-form-item",{attrs:{label:"自定义",prop:"customTarget"}},[n("el-input",{attrs:{size:"small"},model:{value:e.customTarget,callback:function(t){e.customTarget=t},expression:"customTarget"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"接口维度"}},[n("el-checkbox",{attrs:{size:"small"},model:{value:e.useApiForward,callback:function(t){e.useApiForward=t},expression:"useApiForward"}},[e._v("启用接口转发")])],1),e._v(" "),e.useApiForward?n("el-form-item",{attrs:{label:"接口地址",prop:"apiPattern"}},[n("el-input",{attrs:{size:"small"},model:{value:e.apiPattern,callback:function(t){e.apiPattern=t},expression:"apiPattern"}})],1):e._e(),e._v(" "),e.expands&&e.expands.length>0?n("el-form-item",{staticClass:"el-form-item__expand",attrs:{label:"扩展环境"}},[n("div",{staticClass:"env-name"},[e._v("（不会影响代理请求头）")])]):e._e(),e._v(" "),e._l(e.expands,function(t){return n("el-form-item",{key:t.key,attrs:{label:t.label}},[n("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择测试环境",size:"small"},model:{value:e.apiExpands[t.key],callback:function(n){e.$set(e.apiExpands,t.key,n)},expression:"apiExpands[expand.key]"}},e._l(Object.keys(t.targetMap),function(e){return n("el-option",{key:e,attrs:{label:e,value:t.targetMap[e]}})}),1)],1)}),e._v(" "),n("el-form-item",{staticClass:"action"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("确认")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.toggleDialog(!1)}}},[e._v("取消")])],1)],2)],1):e._e()],1)};i._withStripped=!0;var o="apiTarget",s=864e5,l=function(e){var t=localStorage.getItem(e);if(!t)return null;try{var n=JSON.parse(t),a=n.value;return+n.expireTime>Date.now()?a:(localStorage.removeItem(e),null)}catch(e){return console.log(e),null}},p={data:function(){return{show:!1,apiTarget:"",customTarget:"",panelMounted:!1,expireTime:"",targetType:"test",useApiForward:!1,useApiMock:!1,apiPattern:"",targetMap:{},apiExpands:{},apiExpandsMap:{},expands:[]}},methods:{toggleDialog:function(e){this.show=e},onSubmit:function(){var e,t,n,a,r={};r.targetType=this.targetType,r.useApiForward=this.useApiForward,r.customTarget=this.customTarget,r.apiTarget=this.apiTarget,r.useApiMock=this.useApiMock,r.apiPattern=this.apiPattern,r.apiExpands=this.apiExpands||{},r.apiExpandsMap=this.getExpandsMap(),e=o,t=r,n=this.expireTime,a=JSON.stringify({value:t,expireTime:(n||s)+Date.now()}),localStorage.setItem(e,a),this.toggleDialog(!1),window.location.reload()},initExpands:function(){var e=this.apiExpands||{},t=this.apiExpandsMap||{},n=Object.keys(e);n&&n.length<=0||(this.expands||[]).map(function(n){var a=n.key,r=e[a],i=[],o=t[a]||[];n.targetMap||(n.targetMap={}),i=Object.values(n.targetMap),r&&!i.includes(r)&&(n.targetMap[r]=r),o.forEach(function(e){i.includes(e)||(n.targetMap[e]=e)})})},getExpandsMap:function(){var e=this.expands||[],t=this.apiExpands||{},n={};return e.forEach(function(e){var a=e.key,r=e.targetMap,i=void 0===r?{}:r,o=new Set,s=Object.values(i);t[a]&&o.add(t[a]),s.map(function(e){o.add(e)}),n[a]=Array.from(o)}),n}},watch:{expands:function(e){this.initExpands()}},created:function(){var e=l(o);e&&(this.targetType=e.targetType||"test",this.useApiForward=e.useApiForward,this.useApiMock=e.useApiMock,this.apiPattern=e.apiPattern,this.apiTarget=e.apiTarget,this.customTarget=e.customTarget,this.apiExpands=e.apiExpands||{},this.apiExpandsMap=e.apiExpandsMap||{})},mounted:function(){this.targets=Object.keys(this.targetMap),this.panelMounted=!0,this.initExpands()}};n(2);var u=function(e,t,n,a,r,i,o,s){var l,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=n,p._compiled=!0),a&&(p.functional=!0),i&&(p._scopeId="data-v-"+i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},p._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(p.functional){p._injectStyles=l;var u=p.render;p.render=function(e,t){return l.call(t),u(e,t)}}else{var c=p.beforeCreate;p.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:p}}(p,i,[],!1,null,null,null);u.options.__file="src/ajax-extend/panel.vue";var c=u.exports;var d=function(e){var t=e.targetMap,n=e.enable,a=void 0===n||n,i=e.useCompleteApi,p=void 0===i||i,u=e.expireTime,d=e.expands;if(!t)throw Error("targetMap can not be empty");return window.addEventListener("DOMContentLoaded",function(){!function(e,t,n,a){if(!window.__PANEL_MOUNTED__&&e){var i=document.createElement("div");i.id="extends-panel",document.body.appendChild(i);var o=new r.a(c);o.expireTime=t||s,o.targetMap=n,o.expands=a||[],o.$mount("#extends-panel"),window.__PANEL_MOUNTED__=!0}}(a,u,t,d)}),function(e){var n=l(o);if(!n)return e;var a=n.targetType,r=n.useApiForward,i=n.customTarget,s=n.apiTarget,u=n.apiPattern,c="test"===a?s:i,d=t[c||0],f=p?""+(d||c):c;return r&&u?(e.url.includes(u)&&(e.headers["X-Api-Target"]=f),e):(e.headers["X-Api-Target"]=f,e)}};n.d(t,"getExpandValue",function(){return f});var f=function(e){var t=l(o);return t?(t.apiExpands||{})[e]:null};t.default=d},function(e,t,n){"use strict";function a(e,t){for(var n=[],a={},r=0;r<t.length;r++){var i=t[r],o=i[0],s={id:e+":"+r,css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}n.r(t),n.d(t,"default",function(){return g});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,p=!1,u=function(){},c=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,n,r){p=n,c=r||{};var o=a(e,t);return m(o),function(t){for(var n=[],r=0;r<o.length;r++){var s=o[r];(l=i[s.id]).refs--,n.push(l)}t?m(o=a(e,t)):o=[];for(r=0;r<n.length;r++){var l;if(0===(l=n[r]).refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete i[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],a=i[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(x(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(x(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function x(e){var t,n,a=document.querySelector("style["+d+'~="'+e.id+'"]');if(a){if(p)return u;a.parentNode.removeChild(a)}if(f){var r=l++;a=s||(s=v()),t=y.bind(null,a,r,!1),n=y.bind(null,a,r,!0)}else a=v(),t=function(e,t){var n=t.css,a=t.media,r=t.sourceMap;a&&e.setAttribute("media",a);c.ssrId&&e.setAttribute(d,t.id);r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,a),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else n()}}var h,_=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function y(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=_(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}}])});